// ===== PRINT STYLES (A4 Layout - Layout động) =====

@media print {
  // Ẩn các element không cần in
  .no-print {
    display: none !important;
  }
  
  // Hiện element chỉ dùng cho in
  .print-only {
    display: block !important;
  }
  
  // Cài đặt trang in A4
  @page {
    size: A4 portrait;
    margin: 12mm 10mm 15mm 10mm;
  }
  
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  body {
    margin: 0;
    padding: 0;
    background: $white;
    counter-reset: page;
  }
  
  .container {
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  
  // Layout sổ ảnh khi in - động theo data-layout
  .student-gallery {
    display: grid !important;
    grid-auto-rows: auto;
    gap: $print-gap !important;
    padding: 0 !important;
    page-break-inside: auto !important; // Cho phép break trong gallery nếu cần
  }
  
  body[data-layout="4"] .student-gallery {
    grid-template-columns: repeat(4, 1fr) !important; // 4 cột
  }
  
  body[data-layout="5"] .student-gallery {
    grid-template-columns: repeat(5, 1fr) !important; // 5 cột
  }
  
  // Mỗi card sinh viên
  .student-card {
    width: 100% !important;
    max-width: none !important;
    margin: 0 !important;
    page-break-inside: avoid !important; // Tránh cắt card giữa 2 trang
    break-inside: avoid !important;
    border: $print-card-border solid $dark-gray !important;
    border-radius: $print-border-radius !important;
    box-shadow: none !important;
    overflow: hidden;
    background: $white !important;
    
    &:hover {
      transform: none !important;
      box-shadow: none !important;
    }

    img {
      width: 100% !important;
      object-fit: cover !important;
      display: block !important;
      background-color: $light-gray !important;
    }
  }
  
  // Ảnh sinh viên - điều chỉnh theo layout để vừa 4 hàng/trang
  body[data-layout="4"] .student-card img {
    height: $print-img-height-4col !important; // Giảm từ 48mm xuống 44mm để vừa 4 hàng
  }
  
  body[data-layout="5"] .student-card img {
    height: $print-img-height-5col !important; // Giảm từ 42mm xuống 38mm để vừa 4 hàng
  }
  
  // Thông tin sinh viên
  .card-body {
    padding: $print-card-padding !important; // Giảm padding từ 2.5mm xuống 2mm
    text-align: center !important;
    background: $white !important;
  }
  
  .card-title {
    font-size: $print-title-size !important; // Giảm từ 9pt xuống 8pt
    font-weight: 600 !important;
    color: $black !important;
    margin: 0 !important;
    line-height: 1.1 !important; // Giảm line-height
  }
  
  .student-name {
    font-size: $print-name-size !important; // Giảm từ 8pt xuống 7pt
    color: $dark-gray !important;
    margin-top: 0.5mm !important; // Giảm margin từ 1mm xuống 0.5mm
    display: block !important;
  }
  
  // Header trang đầu tiên
  .print-header {
    text-align: center !important;
    margin-bottom: 3mm !important;
    page-break-after: avoid !important;
    
    h2 {
      font-size: $print-header-size !important;
      font-weight: bold !important;
      margin: 0 0 1mm 0 !important;
      color: $black !important;
    }
    
    p {
      font-size: $print-subheader-size !important;
      margin: 0 0 2mm 0 !important;
      color: $dark-gray !important;
    }
  }
  
  // Header chỉ ở trang đầu
  .print-first-header {
    text-align: center !important;
    margin-bottom: 2mm !important; // Giảm từ 3mm xuống 2mm
    page-break-after: avoid !important;
    
    h2 {
      font-size: $print-header-size !important;
      font-weight: bold !important;
      margin: 0 0 0.5mm 0 !important; // Giảm từ 1mm xuống 0.5mm
      color: $black !important;
      line-height: 1.2 !important; // Thêm line-height để thu gọn
    }
    
    p {
      font-size: $print-subheader-size !important;
      margin: 0 0 1mm 0 !important; // Giảm từ 2mm xuống 1mm
      color: $dark-gray !important;
      line-height: 1.3 !important; // Thêm line-height để thu gọn
    }
  }
  
  // Mỗi page content
  .page-content {
    position: relative !important;
    // Không dùng page-break-inside: avoid để tránh số trang bị tách riêng
  }
  
  .page-break-before {
    page-break-before: always !important;
    padding-top: 0 !important;
    margin-top: 0 !important;
  }
  
  // Số trang ở cuối - dùng margin thay vì absolute
  .page-number-fixed {
    text-align: center !important;
    font-size: $print-page-number-size !important;
    color: $medium-gray !important;
    font-weight: 500 !important;
    margin-top: 2mm !important; // Giảm từ 5mm xuống 2mm để không bị tách trang
    padding-bottom: 2mm !important; // Giảm từ 3mm xuống 2mm
    page-break-before: avoid !important; // Tránh break trước số trang
  }
  
  // Đảm bảo in đủ màu
  img {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
}

// Element chỉ hiện khi in - mặc định ẩn trên web
.print-only {
  display: none !important;
}

@media print {
  .print-only {
    display: block !important;
  }
}
